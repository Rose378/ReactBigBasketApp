{"ast":null,"code":"import React,{Fragment,useEffect,useState}from\"react\";import toast from'react-hot-toast';import{useParams}from\"react-router-dom\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import Navbar from\"../navbar/Navbar\";// class UpdateProduct extends React.Component{\n//     constructor(props){\n//         console.log(props , 'props')\n//         super(props)\n//         this.state = {\n//             productId:''\n//         }\n//     }\n//     componentDidMount(){\n//          let prodID = this.props.match.params.id\n//         console.log(prodID , 'hdggdggdg')\n//         this.setState({\n//             productId : prodID\n//         })\n//     }\n//     render(){\n//         return(\n//             <Fragment>\n//                 <div className=\"container\">\n//                     {this.state.productId}\n//                 </div>\n//             </Fragment>\n//         )\n//     }\n// }\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateProduct=()=>{const{id}=useParams();const[data,prodData]=useState({name:'',price:'',image:'',quantity:'',info:''});useEffect(()=>{let dataUrl=\"http://127.0.0.1:9000/api/products/\".concat(id);axios.get(dataUrl).then(res=>{prodData({...data,name:res.data.name,price:res.data.price,quantity:res.data.quantity,info:res.data.info});});},[]);const changeInput=event=>{event.preventDefault();prodData({...data,[event.target.name]:event.target.value});};//image change convert to base 64 to save in server\nconst changeImage=async event=>{let imageFile=event.target.files[0];const base64=await base64Image(imageFile);prodData({...data,image:base64});};const base64Image=imageFile=>{return new Promise((resolve,reject)=>{let reader=new FileReader();reader.readAsDataURL(imageFile);reader.addEventListener('load',()=>{if(reader.result){resolve(reader.result);}else{reject(toast.error('Image cant be read'));}});});};const navigate=useNavigate();function submitupdate(e){e.preventDefault();axios.put(\"http://127.0.0.1:9000/api/products/\".concat(id),data).then(()=>{navigate('/ProductAdmin');}).catch(err=>{toast.error('Connection error');});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4 animated zoomIn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"h3 text-success\",children:\"Update Product\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Update the Product with all your requirements\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-dark text-white m-3\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Update Product\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body m-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitupdate,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Product Name\",name:\"name\",value:data.name,onChange:changeInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:changeImage,type:\"file\",className:\"custom-file-input form-control\",id:\"customFile\"}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label form-label\",htmlFor:\"customFile\",children:\"Browse\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Price\",name:\"price\",value:data.price,onChange:changeInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Available quantity\",name:\"quantity\",value:data.quantity,onChange:changeInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:3,placeholder:\"general info\",name:\"info\",value:data.info,onChange:changeInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Product\",className:\" btn btn-success btn-sm\"})})]})})]})})})]})]});};export default UpdateProduct;","map":{"version":3,"names":["React","Fragment","useEffect","useState","toast","useParams","axios","useNavigate","Navbar","jsx","_jsx","jsxs","_jsxs","UpdateProduct","id","data","prodData","name","price","image","quantity","info","dataUrl","concat","get","then","res","changeInput","event","preventDefault","target","value","changeImage","imageFile","files","base64","base64Image","Promise","resolve","reject","reader","FileReader","readAsDataURL","addEventListener","result","error","navigate","submitupdate","e","put","catch","err","children","className","onSubmit","type","placeholder","onChange","htmlFor","rows"],"sources":["/Users/suresh/Desktop/RoseMaryReactApps/ClientsideBIGBASKETapp/ReactBigBasketApp/clientfrontend/src/components/products/UpdateProduct.js"],"sourcesContent":["import React, { Fragment , useEffect, useState } from \"react\";\nimport toast from 'react-hot-toast'\n\nimport {useParams} from \"react-router-dom\"\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport Navbar from \"../navbar/Navbar\";\n\n// class UpdateProduct extends React.Component{\n//     constructor(props){\n//         console.log(props , 'props')\n//         super(props)\n\n//         this.state = {\n//             productId:''\n//         }\n//     }\n    \n//     componentDidMount(){\n//          let prodID = this.props.match.params.id\n//         console.log(prodID , 'hdggdggdg')\n//         this.setState({\n//             productId : prodID\n//         })\n//     }\n\n//     render(){\n//         return(\n//             <Fragment>\n//                 <div className=\"container\">\n//                     {this.state.productId}\n//                 </div>\n//             </Fragment>\n//         )\n//     }\n// }\n\nconst UpdateProduct = () => {\n    const { id } = useParams();\n    const [data,prodData] = useState({\n                name:'',\n                price:'',\n                image:'',\n                quantity:'',\n                info:'',\n    })\n    useEffect(() => {\n        let dataUrl = `http://127.0.0.1:9000/api/products/${id}`\n        axios.get(dataUrl).then((res) => {\n           prodData({\n            ...data,\n            name:res.data.name,\n            price:res.data.price,\n            quantity:res.data.quantity,\n            info:res.data.info ,  \n           })\n    })\n  \n    },[])\n\n    const changeInput = (event) => {\n        event.preventDefault();\n         prodData({\n            ...data,\n            [event.target.name]: event.target.value\n        })\n    } ;\n\n    //image change convert to base 64 to save in server\n   const changeImage =  async (event) => {\n        let imageFile = event.target.files[0];\n        const base64 = await base64Image(imageFile)\n        prodData({\n            ...data,\n            image: base64\n        })\n    }\n\n const base64Image = (imageFile) => {\n    return new Promise((resolve,reject) => {\n        let reader = new FileReader();\n        reader.readAsDataURL(imageFile);\n        reader.addEventListener('load' , () => {\n            if(reader.result){\n                resolve(reader.result)\n            }\n            else {\n                reject(toast.error('Image cant be read'))\n            }\n        })\n    })\n}\n\n    const navigate = useNavigate()\n    function submitupdate(e){\n        e.preventDefault();\n        axios.put( `http://127.0.0.1:9000/api/products/${id}` , data).then(() => {\n            navigate('/ProductAdmin')\n            \n        }).catch((err) => {\n            toast.error('Connection error')\n        })\n\n    }\n     \n\n\n    return(\n        <Fragment>\n                    <Navbar/>\n\n            <div className=\"container mt-4 animated zoomIn\">\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <p className=\"h3 text-success\">Update Product</p>\n                            <p>Update the Product with all your requirements</p>\n                        </div>\n                    </div>\n                    <div className=\"row mt-3\">\n                        <div className=\"col-md-5\">\n                            <div className=\"card \">\n                                <div className=\"card-header bg-dark text-white m-3\">\n                                    <h4>Update Product</h4>\n                                </div>\n                                <div className=\"card-body m-3\">\n\n                                    <form onSubmit={submitupdate}>\n                                        <div className=\"form-group\">\n                                            <input type=\"text\" className=\"form-control\" placeholder=\"Product Name\" \n                                            name=\"name\"\n                                            value = {data.name}\n                                            onChange={changeInput}\n                                          />\n                                        </div>\n                                        <div className=\"form-group\">\n                                            <div className=\"custom-file\">\n                                                <input  onChange={changeImage}                                               \n                                                 type=\"file\"  className=\"custom-file-input form-control\" id=\"customFile\"/>\n                                                <label className=\"custom-file-label form-label\" htmlFor=\"customFile\">Browse</label>\n\n                                            </div>\n                                        \n                                        </div> \n                                        <div className=\"form-group\">\n                                            <input type=\"number\" className=\"form-control\" placeholder=\"Price\"\n                                             name=\"price\"\n                                             value = {data.price}\n                                             onChange={changeInput}\n                                            />\n                                        </div>\n                                        <div className=\"form-group\">\n                                            <input type=\"number\" className=\"form-control\" placeholder=\"Available quantity\"\n                                             name=\"quantity\"\n                                             value = {data.quantity}\n                                             onChange={changeInput}\n                                             />\n                                        </div>\n                                        <div className=\"form-group\">\n                                            <textarea className=\"form-control\" rows={3} placeholder=\"general info\"\n                                                 name=\"info\"\n                                                 value = {data.info}\n                                                 onChange={changeInput}\n                                             ></textarea>\n                                        </div>\n                                        <div className=\"form-group\">\n        \n                                            <input type=\"submit\" value=\"Update Product\" className=\" btn btn-success btn-sm\"/>\n                                         </div>\n\n                                    </form>\n    \n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n        </Fragment>\n    )\n\n} \n\nexport default UpdateProduct"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}